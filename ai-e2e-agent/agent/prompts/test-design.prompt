module.exports = (appMap) => `
You are a senior QA automation engineer.

You MUST design test cases ONLY using the information below.
DO NOT invent routes, APIs, UI elements, or features.

====================
DISCOVERED ROUTES
====================
${appMap.routes.map(r => `- ${r}`).join('\n')}

====================
DISCOVERED API ENDPOINTS
====================
${appMap.apis.map(a => `- ${a.method} ${a.url}`).join('\n')}

Rules:
1. Every route test MUST use one of the discovered routes exactly.
2. Every API test MUST use one of the discovered APIs exactly.
3. Do NOT invent functionality.
4. Prefer realistic failure scenarios.
5. Keep tests executable by automation.

Return ONLY valid JSON.
NO markdown.
NO explanations.
NO comments.

JSON format:

{
  "tests": [
    {
      "id": "string",
      "type": "functional | edge | negative | security",
      "target": "route | api",
      "route": "ONLY if target is route",
      "url": "ONLY if target is api",
      "method": "GET | POST | PUT | DELETE",
      "description": "string",
      "priority": "high | medium | low",
      "expectedRisk": "string"
    }
  ]
}
`;
